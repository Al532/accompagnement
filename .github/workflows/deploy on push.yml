name: Deploy on push

on:
  push:  # se d√©clenche sur tous les push, quelle que soit la branche

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      # 1Ô∏è‚É£ R√©cup√®re le code de la branche pouss√©e
      - name: Checkout branch
        uses: actions/checkout@v4
        with:
          ref: ${{ github.ref_name }}  # r√©cup√®re automatiquement la branche du push

      # 2Ô∏è‚É£ (optionnel) Installe les d√©pendances si ton site en a besoin
      - name: Install dependencies
        run: |
          if [ -f package.json ]; then
            npm ci
          fi

      # 3Ô∏è‚É£ (optionnel) Build du site
      - name: Build site
        run: |
          if [ -f package.json ]; then
            npm run build
          fi

      # 4Ô∏è‚É£ D√©ploiement
      # Remplace cette √©tape selon ton type d‚Äôh√©bergement :
      # - GitHub Pages
      # - serveur via SSH
      # - S3, Netlify, Vercel, etc.
      - name: Deploy branch
        run: |
          echo "D√©ploiement de la branche ${{ github.ref_name }}..."
          # üëâ Exemple : rsync vers un serveur distant :
          # rsync -avz --delete ./dist/ user@serveur:/var/www/${{ github.ref_name }}
